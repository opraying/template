{
  "$schema": "https://www.unpkg.com/wrangler/config-schema.json",
  "name": "template-sync-agent-client",
  "compatibility_date": "2025-09-25",
  "compatibility_flags": ["nodejs_compat", "enable_request_signal"],
  "main": "index.ts",
  "send_metrics": false,
  "workers_dev": false,
  "preview_urls": false,
  "logpush": false,
  "upload_source_maps": true,
  "placement": {
    "mode": "smart",
  },
  "rules": [
    {
      "globs": ["**/*.js"],
      "type": "ESModule",
    },
  ],
  "limits": {
    "cpu_ms": 30,
  },
  "observability": {
    "enabled": true,
  },
  "durable_objects": {
    "bindings": [
      {
        "name": "SYNC_AGENT_CLIENT_DURABLE_OBJECT",
        "class_name": "SyncAgentClientDurableObject",
      },
    ],
  },
  "migrations": [
    {
      "tag": "v1",
      "new_sqlite_classes": ["SyncAgentClientDurableObject"],
    },
  ],
  "services": [
    {
      "binding": "SYNC_STORAGE_PROXY",
      "service": "template-sync-storage-proxy",
    },
    {
      "binding": "SYNC_SERVER",
      "service": "template-sync-server",
    },
  ],
  "env": {
    "test": {
      "workers_dev": true,
      "durable_objects": {
        "bindings": [
          {
            "name": "SYNC_AGENT_CLIENT_DURABLE_OBJECT",
            "class_name": "SyncAgentClientDurableObject",
            "script_name": "template-sync-agent-client-test",
          },
        ],
      },
      "migrations": [
        {
          "tag": "v1",
          "new_sqlite_classes": ["SyncAgentClientDurableObject"],
        },
      ],
      "services": [
        {
          "binding": "SYNC_STORAGE_PROXY",
          "service": "template-sync-storage-proxy-test",
        },
        {
          "binding": "SYNC_SERVER",
          "service": "template-sync-server-test",
        },
      ],
    },
  },
}
